controller_manager:
  ros__parameters:
    update_rate: 200  # Reduced from 200 - still fast but more reasonable
    
    gains:
      # More conservative PID gains to reduce overshoot
      wheel1_joint: {p: 10.0, i: 0.1, d: 0.1, i_clamp: 1.0, ff: 1.0}
      wheel2_joint: {p: 10.0, i: 0.1, d: 0.1, i_clamp: 1.0, ff: 1.0}
      wheel3_joint: {p: 10.0, i: 0.1, d: 0.1, i_clamp: 1.0, ff: 1.0}
    
    joint_state_broadcaster:
      type: joint_state_broadcaster/JointStateBroadcaster
    
    omni_drive_controller:
      type: omni_wheel_drive_controller/OmniWheelDriveController

omni_drive_controller:
  ros__parameters:
    wheel_offset: 0.523599 #pi/6
    wheel_names:
      [
        "wheel1_joint",
        "wheel2_joint",
        "wheel3_joint",
      ]

    robot_radius: 0.128 #0.115 + 0.0125 (radius + half wheel width)
    wheel_radius: 0.024

    odom_frame_id: odom
    base_frame_id: base_link
    pose_covariance_diagonal: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
    twist_covariance_diagonal: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0]

    open_loop: true
    position_feedback: false
    enable_odom_tf: false #let ekf handle odometry

    cmd_vel_timeout: 0.5
    publish_limited_velocity: true